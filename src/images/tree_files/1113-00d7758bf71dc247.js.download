(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1113],{51113:function(a,n,e){"use strict";var t=e(85893),i=e(67294),o=e(5616),r=e(81458),s=e(58703),d=e.n(s),l=e(89572),_=e(53841),u=e(77393),c=e(7784),m=e(61293),g=e(45467),p=e(14302),f=e(65982),v=e(41),C=e(40105),h=e(1903),w=e(79103),b=e(11163);n.Z=a=>{let{fundraiserDetails:n,position:s,utmContent:y="homepage_featured",ngoDetails:x={},isNgoProfile:N=!1,isSpotlight:D}=a,j=(0,i.useContext)(u.Z),I=null==j?void 0:j.Config,R=null==j?void 0:j.userIPContext.state.ipData,A={type:"point",coordinates:[null==R?void 0:R.longitude,null==R?void 0:R.latitude]},{currencyList:P,currencyCodeData:T,currencySymbolData:F,currencyExchangeData:Z}=null==I?void 0:null===(aa=I.state)||void 0===aa?void 0:aa.currency,[E,S]=(0,i.useState)("INR"),[B,O]=(0,i.useState)(1),[M,U]=(0,i.useState)(!1),{campaignData:k}=n,L=null==j?void 0:j.Toast,[G,H]=(0,i.useState)(null),[W,V]=(0,i.useState)(!1),Q=null==j?void 0:j.User,K=null==Q?void 0:null===(an=Q.state)||void 0===an?void 0:an.userData,[z,J]=(0,i.useState)(""),{asPath:Y}=(0,b.useRouter)(),q=(0,i.useMemo)(()=>{let{is_supercampaign:a,supercampaign:n}=k||{};return a&&(null==n?void 0:n.is_tax_exempt)},[k]),$=(0,i.useMemo)(()=>{let a={...G};return delete a.utm_source,delete a.utm_content,delete a.utm_type,a&&Object.entries(a).map(a=>{let[n,e]=a;return"string"==typeof e&&"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(e))}).join("&")},[G]);(0,i.useEffect)(()=>{(0,c.U$)(null==n?void 0:n.exemptions,T,null==n?void 0:n.can_provide_10be)?V(!0):V(!1)},[T]);let getYTThumbnailImage=()=>{let a=(null==n?void 0:n.image)?null==n?void 0:n.image:l.d.DEFAULT_IMAGE_SUPPORT_FUNDRAISERS;if(!a.includes("youtube"))return J(a);{let n=a.lastIndexOf("/"),e=a.substring(0,n),t="".concat(e,"/maxresdefault.jpg");(0,c.pz)(t).then(a=>{120===a.width&&90===a.height?J("".concat(e,"/0.jpg")):J(t)}).catch(a=>{console.error("Error:",a.message)})}};(0,i.useEffect)(()=>{if(Y){getYTThumbnailImage();let a=function(a){let n=new URLSearchParams(a),e={};for(let[a,t]of n.entries())a.startsWith("utm_")&&(e[a]=t);return e}(location.search),n={};a&&(null==a?void 0:a.utm_source)&&(n={...a}),H(n)}},[Y]),(0,i.useEffect)(()=>{S(T),O(Z)},[T,Z]);let initiateDonationFlow=async a=>{a.preventDefault(),U(!0),handleDonations(a);let e={_id:null==n?void 0:n.id,slug:null==n?void 0:n.slug};(0,c.vP)({amount:1,orderInfo:{isDefaultAmount:!1,redirection_checkout_status:!0},currencySymbolData:F,campaignData:e,userData:K,donation_currency:T})},handleDonations=async a=>{var t,i,o,r,d;let l;a.preventDefault(),("frlisting_fundraisers"===y||"ngoprofile_similarFR_donate"===y||"spotlight_featured"===y||"ngoprofile_fundraisers"===y)&&await AddAmplitudeAnalytics("donate-cta"),(null===(t=e.g)||void 0===t?void 0:t.window)&&(null===(o=e.g)||void 0===o?void 0:null===(i=o.window)||void 0===i?void 0:i.getUTMParameters)&&(l=e.g.window.getUTMParameters());let _=null===(r=window)||void 0===r?void 0:r.localStorage.getItem("referrer"),u=null===(d=(0,c.IH)(_))||void 0===d?void 0:d.value;if(null!==X){let a=(0,c.Pp)("fundraiser_card"),e={campaign_id:n.id,additional_fields:{actual_amount:void 0,source_medium:{...G,utm_content:y,utm_position:s,utm_source:G&&(null==G?void 0:G.utm_source),utm_referal_source:(null==l?void 0:l.utm_referral)?null==l?void 0:l.utm_referral:"direct",utm_id:(null==G?void 0:G.utm_id)?null==G?void 0:G.utm_id:null==l?void 0:l.utm_id,utm_medium:(null==G?void 0:G.utm_medium)?null==G?void 0:G.utm_medium:null==l?void 0:l.utm_medium,utm_campaign:(null==G?void 0:G.utm_campaign)?null==G?void 0:G.utm_campaign:null==l?void 0:l.utm_campaign,utm_term:(null==G?void 0:G.utm_term)?null==G?void 0:G.utm_term:null==l?void 0:l.utm_term},device:null==a?void 0:a.device,cta_type:null==a?void 0:a.cta_type,cta_location:null==a?void 0:a.location,location:A||null,initial_utm_source:(null==l?void 0:l.initial_utm_source)?null==l?void 0:l.initial_utm_source:"direct",referral_domain:u||""},amount:void 0,currency_code:T,subscription_type:null==n?void 0:n.campaign_type};(0,g.Rj)("donations",e).then(a=>{if(200===a.status){var n,e;let t=null==a?void 0:null===(e=a.data)||void 0===e?void 0:null===(n=e.donation)||void 0===n?void 0:n.order_id,i="".concat(g._n,"/donate/").concat(t);window&&window.open(i,"_self"),U(!1)}}).catch(a=>{var n,e;U(!1),null==L||L.dispatch({type:"new-toast",value:{open:!0,severity:"error",message:null==a?void 0:null===(e=a.response)||void 0===e?void 0:null===(n=e.data)||void 0===n?void 0:n.error,seconds:3e3}})})}},X=(0,i.useRef)(null);var aa,an,ae,at=(0,p.JQ)(null==n?void 0:n.target_amount_in_inr,null==n?void 0:n.raised_amount_in_inr);let AddAmplitudeAnalytics=async a=>{if("homepage_featured"===y||"spotlight_featured"===y){let a={timestamp:new Date,fundraiser_slot_no:Number(s),fundraiser_name:null==n?void 0:n.name,fundraiser_id:null==n?void 0:n.id,campaign_type:null==n?void 0:n.campaign_type};return D?await (0,m.HI)("spotlightFeaturedFundrClicked",a):await (0,m.HI)(m.Ze.homePageFeaturedFundrClicked,a,G)}if("frlisting_fundraisers"===y||"ngoprofile_similarFR_donate"===y||"ngoprofile_fundraisers"===y){let r={user:K,slot_no:Number(s),cause:Array(null==n?void 0:n.causes).toString(),utmParameters:G,fundraiserData:{tags:null==n?void 0:n.tags,fundraiser_title:null==n?void 0:n.name,fundraiser_id:null==n?void 0:n.id,nonprofit_id:null==n?void 0:n.nonprofit_id,fundraiser_type:null==n?void 0:n.campaign_type,nonprofit:null==n?void 0:n.parent_name}};if("ngoprofile_similarFR_donate"===y||"ngoprofile_fundraisers"===y){if(null==r?void 0:r.fundraiserData){var e,t,i,o;let a=(0,c.NJ)(null==r?void 0:null===(e=r.fundraiserData)||void 0===e?void 0:e.tags),n=a.length>0?null==a?void 0:a.join(", "):"";r.fundraiser_tags=n||"",r.fundraiser_id=(null==r?void 0:r.fundraiserData)&&(null==r?void 0:null===(t=r.fundraiserData)||void 0===t?void 0:t.fundraiser_id)||"",r.fundraiser_title=(null==r?void 0:r.fundraiserData)&&(null==r?void 0:null===(i=r.fundraiserData)||void 0===i?void 0:i.fundraiser_title)||"",r.fundraiser_type=(null==r?void 0:r.fundraiserData)&&(null==r?void 0:null===(o=r.fundraiserData)||void 0===o?void 0:o.fundraiser_type)||""}delete r.fundraiserData}return"donate-cta"===a?"ngoprofile_similarFR_donate"===y?await (0,m.HI)(m.Ze.ngoSimilarFRDonateCTA,{...r,nonProfitData:{id:null==x?void 0:x.id,name:null==x?void 0:x.name,slug:null==x?void 0:x.slug,causes:null==x?void 0:x.causes}}):"ngoprofile_fundraisers"===y?await (0,m.HI)(m.Ze.ngoFRListDonatCTA,{...r,nonProfitData:{id:null==x?void 0:x.id,name:null==x?void 0:x.name,slug:null==x?void 0:x.slug,causes:null==x?void 0:x.causes}}):await (0,m.HI)(m.Ze.frListing_FundraiserCTAClicked,r):"ngoprofile_similarFR_donate"===y?await (0,m.HI)(m.Ze.ngoSimilarFRClicked,{...r,nonProfitData:{id:null==x?void 0:x.id,name:null==x?void 0:x.name,slug:null==x?void 0:x.slug,causes:null==x?void 0:x.causes}}):"ngoprofile_fundraisers"===y?await (0,m.HI)(m.Ze.ngoFRListFundraiserClicked,{...r,nonProfitData:{id:null==x?void 0:x.id,name:null==x?void 0:x.name,slug:null==x?void 0:x.slug,causes:null==x?void 0:x.causes}}):await (0,m.HI)(m.Ze.frListing_FundraiserClicked,r)}},redirectToCampaign=async()=>{U(!0),await AddAmplitudeAnalytics(),U(!1);let a="".concat(g._n,"/fundraisers/").concat(n.slug)+"?utm_content=".concat(y,"&utm_position=").concat(s)+"".concat((null==G?void 0:G.utm_source)?"&utm_source="+G.utm_source:"")+"&".concat($);(0,c.ZB)(a)},handleStartFundraiser=async a=>{if(a.preventDefault(),U(!0),x&&(null==x?void 0:x._id)&&n&&(null==n?void 0:n.slug)){let a=(0,c.Pp)("ngoprofile_create_supporting_fundraiser"),e={nonProfitData:x,utmParameters:{...G,utm_position:s},cta_type:null==a?void 0:a.cta_type,cta_location:null==a?void 0:a.location,location:A,user:K};await (0,m.HI)(m.Ze.ngoCreateSupportingFundraiser,e);let t="".concat(g._n,"/fundraisers/create/program/").concat(x.id,"?parent_fundraiser=").concat(n.slug);U(!1),window.open(t,"_self")}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.Z,{className:"".concat(N?"".concat(d().ngo_sf_widget):"".concat(d().sf_widget)),children:[(0,t.jsx)("a",{onClick:redirectToCampaign,children:(0,t.jsxs)(o.Z,{className:"".concat(N?"".concat(d().ngo_sf_widget_img):"".concat(d().sf_widget_img)),children:[z?(0,t.jsx)(f.Z,{src:z,alt:null==n?void 0:n.name}):(0,t.jsx)(_.Z,{color:"#E7424B",loading:!z,size:80}),q?(0,t.jsx)("p",{className:d().taxBenefits,children:"Tax Benefits Available"}):W&&(0,t.jsx)("p",{className:d().taxBenefits,children:"Tax Benefits Available"})]})}),(0,t.jsxs)(o.Z,{className:"".concat(N?"".concat(d().ngo_sf_widget_content):"".concat(d().sf_widget_content)),children:[(0,t.jsx)(o.Z,{style:{marginBottom:16},children:(0,t.jsxs)("a",{onClick:redirectToCampaign,children:[(0,t.jsxs)("div",{className:"".concat(N?"".concat(d().ngo_fundraiser_name_container):"".concat(d().fundraiser_name_container)),children:[(0,t.jsx)("h3",{children:null==n?void 0:n.name}),(0,t.jsx)(o.Z,{width:"100%",className:d().creator_name_container,children:(null==n?void 0:n.parent_name)!==""&&(0,t.jsxs)("p",{className:"".concat(N?"".concat(d().ngo_creator_name):"".concat(d().creator_name)),children:["by ",(0,t.jsx)("span",{children:null==n?void 0:n.parent_name})," "]})})]}),(0,t.jsxs)(o.Z,{className:d().sfw_progress,children:[(0,t.jsxs)(o.Z,{className:"".concat(N?"".concat(d().ngo_supporterNdays):"".concat(d().supporterNdays)),children:[(0,t.jsxs)(o.Z,{className:d().supporter,children:[(0,t.jsx)(f.Z,{src:l.d.CAMPAIGN_CARD_DONORS_IMAGE,alt:null==n?void 0:n.creator_name}),(0,t.jsxs)("span",{children:[null==n?void 0:n.supporter_count," Donations"]})]}),(0,t.jsxs)(o.Z,{className:d().days,children:[(0,t.jsx)(C.Z,{}),(0,t.jsxs)("span",{children:[(0,c.Uz)(n.expiry_date)," Days Left"]})]})]}),(0,t.jsx)(o.Z,{className:d().sfw_progressBar,children:at&&(0,t.jsx)(r.Z,{variant:"determinate",value:at,classes:{root:N?d().ngoBarRoot:d().barRoot,colorPrimary:d().colorPrimary,barColorPrimary:(null==n?void 0:n.is_closed)?d().completedBar:d().inProgressBar}})}),(0,t.jsxs)(o.Z,{className:"".concat(N?"".concat(d().ngo_sfw_stats):"".concat(d().sfw_stats)),children:[(0,t.jsxs)("strong",{className:d().bold,children:[(0,t.jsx)(h.Z,{code:E}),(0,p.Nh)((0,c.$A)("INR",null==n?void 0:n.raised_amount_in_inr,B,P),E),N&&" raised"]}),!N&&(0,t.jsxs)("span",{children:["Raised of\xa0",(0,t.jsx)(h.Z,{code:E}),(0,p.Nh)((0,c.$A)("INR",null==n?void 0:n.target_amount_in_inr,B,P),E),"\xa0goal"]})]})]}),(null==n?void 0:null===(ae=n.tags)||void 0===ae?void 0:ae.includes("urgent-funds"))&&(0,t.jsxs)(o.Z,{className:d().urgent_need,children:[(0,t.jsx)(w.Z,{}),(0,t.jsx)("span",{children:"Urgent Need of Funds"})]})]})}),!N&&(0,t.jsxs)("form",{name:"donate",onSubmit:a=>initiateDonationFlow(a),ref:X,children:[(0,t.jsx)("input",{type:"hidden",name:"campaign_id",value:null==n?void 0:n.id}),(0,t.jsx)("input",{type:"hidden",name:"amount",value:100}),(0,t.jsx)("input",{type:"hidden",name:"currency_code",value:T}),G&&Object.keys(G).map((a,n)=>"utm_source"!==a?(0,t.jsx)("input",{type:"hidden",name:"additional_fields[source_medium][".concat(a,"]"),value:G[a]},"source".concat(n)):(0,t.jsx)("input",{type:"hidden",name:"additional_fields[source_medium][utm_source]",value:null==G?void 0:G.utm_source},"utm_source")),(0,t.jsx)(o.Z,{className:d().sfw_cta,children:(0,t.jsx)("button",{className:"primary_cta animate-shiny-button",type:"submit",children:(null==n?void 0:n.campaign_type)==="ONE-TIME"?"Donate Now":"Donate Monthly"})})]}),N&&(0,t.jsxs)(o.Z,{className:d().ngo_sfw_cta,children:[(0,t.jsx)("button",{className:"primary_cta ".concat(d().ngo_cta_btn),onClick:initiateDonationFlow,children:"Donate Now"}),(0,t.jsx)("button",{className:"secondary_cta ".concat(d().ngo_start_fr_btn),onClick:handleStartFundraiser,children:"Start a Fundraiser"})]})]})]}),M&&(0,t.jsx)(v.Z,{loading:M})]})}},89572:function(a,n,e){"use strict";e.d(n,{d:function(){return t}});let t={WHATSAPP_ICON:"https://cfstatic.give.do/5b5f32fd-a40b-48db-ac1b-3b4d363456ed.png",TWITTER_ICON:"https://cfstatic.give.do/87c6ad58-2d72-4c68-a987-be902f17a3e1.png",LINKED_IN_ICON:"https://cfstatic.give.do/96cc2723-e6b2-4d61-8d51-c11ab169c78d.png",FACEBOOK_ICON:"https://cfstatic.give.do/4f97769c-80b5-4474-ba5f-211b07beacee.png",EMAIL_ICON:"https://cfstatic.give.do/cd33f282-46ca-4e08-9227-870ac7473a5d.png",COPY_ICON:"https://cfstatic.give.do/49dc363b-d024-4f77-82c2-4527bdccdb9f.png",CAMPAIGN_CARD_DONORS_IMAGE:"https://cfstatic.give.do/cfb41077-269b-4376-a68a-aa45355843fd.webp",RAISE_FUNDS_IMAGE:"https://cfstatic.give.do/15a94e94-f3aa-48c2-9bac-487e22a14b37.webp",GET_INVOLVED_IMAGE:"https://cfstatic.give.do/85e743a3-46c7-4480-b97c-abd7d5354abf.webp",DEFAULT_IMAGE_SUPPORT_FUNDRAISERS:"https://cfstatic.give.do/17b34b36-1c20-42ad-a9fe-abe6b98529ca.webp",DEFAULT_IMAGE_SUPPORT_FUNDRAISERS:"https://cfstatic.give.do/17b34b36-1c20-42ad-a9fe-abe6b98529ca.webp",CAMPAIGN_CARD_DONORS_IMAGE:"https://cfstatic.give.do/cfb41077-269b-4376-a68a-aa45355843fd.webp",DEFAULT_DONOR:"https://cfstatic.give.do/a5e7242a-5b11-4947-9dd0-4fc18931fe5c.webp"}},58703:function(a){a.exports={sf_widget:"CampaignCard_sf_widget__nhnQB",urgent_need:"CampaignCard_urgent_need__iozY4",sfw_progressBar:"CampaignCard_sfw_progressBar__ftVcH",sfw_stats:"CampaignCard_sfw_stats__1PeRR",sf_widget_content:"CampaignCard_sf_widget_content__y74_G",sfw_cta:"CampaignCard_sfw_cta__WvunA",sf_widget_img:"CampaignCard_sf_widget_img__KN824",img_overlay:"CampaignCard_img_overlay__eKXbT",taxBenefits:"CampaignCard_taxBenefits__QgisI",ngo_sf_widget_content:"CampaignCard_ngo_sf_widget_content__RBn3Q",sfw_progress:"CampaignCard_sfw_progress__376B4",supporterNdays:"CampaignCard_supporterNdays__d0SRd",supporter:"CampaignCard_supporter__FqMau",days:"CampaignCard_days__cP9Va",creator_name_container:"CampaignCard_creator_name_container__Cf0RT",creator_name:"CampaignCard_creator_name__hk6Fm",ngo_creator_name:"CampaignCard_ngo_creator_name__t1I_8",ngo_fundraiser_name_container:"CampaignCard_ngo_fundraiser_name_container__ttMiL",ngo_supporterNdays:"CampaignCard_ngo_supporterNdays__rfD6v",ngo_sfw_stats:"CampaignCard_ngo_sfw_stats__pWcQ8",ngo_sf_widget:"CampaignCard_ngo_sf_widget__DM4Vt",ngo_sfw_cta:"CampaignCard_ngo_sfw_cta__PJKqc",ngo_cta_btn:"CampaignCard_ngo_cta_btn__dZDDT",ngo_start_fr_btn:"CampaignCard_ngo_start_fr_btn__7CtWE",ngo_sf_widget_img:"CampaignCard_ngo_sf_widget_img__E8v3k",monthlyTag:"CampaignCard_monthlyTag__10jtJ",monthlyTagText:"CampaignCard_monthlyTagText__tlWIV",barRoot:"CampaignCard_barRoot__9DqRr",ngoBarRoot:"CampaignCard_ngoBarRoot___L3aw",colorPrimary:"CampaignCard_colorPrimary__v_NGc",inProgressBar:"CampaignCard_inProgressBar__iQuVg",completedBar:"CampaignCard_completedBar__ZfWtn",fundraiser_name_container:"CampaignCard_fundraiser_name_container__8WDIL"}}}]);